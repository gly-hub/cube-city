# 关卡最优值计算

## 计算逻辑

### 地图利用率
- 总格子数：mapSize × mapSize
- 可用格子：总格子 × 70%（考虑道路占用30%）

### 建筑分布比例
- 工业建筑：30%（工厂、化学工厂）
- 住宅建筑：25%（高级住宅、豪华住宅）
- 商业建筑：20%（商店、办公室）
- 环境设施：15%（公园、垃圾站、发电）
- 基础设施：10%（医院、警察局等）

### 相互作用加成
- 工厂：基础70，30%有水塔加成（+25%）= 约77.5/个
- 化学工厂Lv3：基础350，工厂集群（+20%），垃圾站/公园（+15%）= 约472.5/个
- 商店Lv3：基础140，2个公园相邻（+20%）= 约168/个
- 办公室Lv3：基础180，2个公园相邻（+24%）= 约223.2/个
- 高级住宅Lv2：基础72，2个公园相邻（+20%）= 约86.4/个
- 豪华住宅Lv3：基础120，2个公园相邻（+20%）= 约144/个

## 各关卡计算结果

### 关卡1 (16×16 = 256格)
- 可用格子：179
- 工业：53（工厂26，化学工厂26）
- 住宅：44（高级30，豪华13）
- 商业：35（商店21，办公室14）
- 环境：26（公园15，发电10）
- 基础设施：17

**每日收入：**
- 工厂：26 × 77.5 = 2,015
- 化学工厂：26 × 472.5 = 12,285
- 商店：21 × 168 = 3,528
- 办公室：14 × 223.2 = 3,125
- **总计：21,953**

**人口：**
- 高级住宅：30 × 86.4 = 2,592
- 豪华住宅：13 × 144 = 1,872
- 最大人口：4,464
- 就业岗位：26×20 + 26×80 + 21×40 + 14×60 = 520 + 2,080 + 840 + 840 = 4,280
- **实际人口：4,280**（受就业限制）

**建筑数量：179**

**稳定度：85-90**（污染控制良好）

**70%难度解锁条件：**
- 人口：2,996
- 每日收入：15,367
- 稳定度：60（最低要求）
- 建筑数量：125

---

### 关卡2 (24×24 = 576格)
- 可用格子：403
- 工业：120（工厂60，化学工厂60）
- 住宅：100（高级70，豪华30）
- 商业：80（商店48，办公室32）
- 环境：60（公园36，发电24）
- 基础设施：40

**每日收入：**
- 工厂：60 × 77.5 = 4,650
- 化学工厂：60 × 472.5 = 28,350
- 商店：48 × 168 = 8,064
- 办公室：32 × 223.2 = 7,142
- **总计：48,206**

**人口：**
- 高级住宅：70 × 86.4 = 6,048
- 豪华住宅：30 × 144 = 4,320
- 最大人口：10,368
- 就业岗位：60×20 + 60×80 + 48×40 + 32×60 = 1,200 + 4,800 + 1,920 + 1,920 = 9,840
- **实际人口：9,840**

**建筑数量：403**

**稳定度：85-90**

**70%难度解锁条件：**
- 人口：6,888
- 每日收入：33,744
- 稳定度：60
- 建筑数量：282

---

### 关卡3 (32×32 = 1024格)
- 可用格子：716
- 工业：214（工厂107，化学工厂107）
- 住宅：179（高级125，豪华54）
- 商业：143（商店86，办公室57）
- 环境：107（公园64，发电43）
- 基础设施：71

**每日收入：**
- 工厂：107 × 77.5 = 8,292
- 化学工厂：107 × 472.5 = 50,558
- 商店：86 × 168 = 14,448
- 办公室：57 × 223.2 = 12,722
- **总计：86,020**

**人口：**
- 高级住宅：125 × 86.4 = 10,800
- 豪华住宅：54 × 144 = 7,776
- 最大人口：18,576
- 就业岗位：107×20 + 107×80 + 86×40 + 57×60 = 2,140 + 8,560 + 3,440 + 3,420 = 17,560
- **实际人口：17,560**

**建筑数量：716**

**稳定度：85-90**

**70%难度解锁条件：**
- 人口：12,292
- 每日收入：60,214
- 稳定度：60
- 建筑数量：501

---

### 关卡4 (40×40 = 1600格)
- 可用格子：1,120
- 工业：336（工厂168，化学工厂168）
- 住宅：280（高级196，豪华84）
- 商业：224（商店134，办公室90）
- 环境：168（公园101，发电67）
- 基础设施：112

**每日收入：**
- 工厂：168 × 77.5 = 13,020
- 化学工厂：168 × 472.5 = 79,380
- 商店：134 × 168 = 22,512
- 办公室：90 × 223.2 = 20,088
- **总计：135,000**

**人口：**
- 高级住宅：196 × 86.4 = 16,934
- 豪华住宅：84 × 144 = 12,096
- 最大人口：29,030
- 就业岗位：168×20 + 168×80 + 134×40 + 90×60 = 3,360 + 13,440 + 5,360 + 5,400 = 27,560
- **实际人口：27,560**

**建筑数量：1,120**

**稳定度：85-90**

**70%难度解锁条件：**
- 人口：19,292
- 每日收入：94,500
- 稳定度：60
- 建筑数量：784

---

### 关卡5 (48×48 = 2304格)
- 可用格子：1,613
- 工业：484（工厂242，化学工厂242）
- 住宅：403（高级282，豪华121）
- 商业：323（商店194，办公室129）
- 环境：242（公园145，发电97）
- 基础设施：161

**每日收入：**
- 工厂：242 × 77.5 = 18,755
- 化学工厂：242 × 472.5 = 114,345
- 商店：194 × 168 = 32,592
- 办公室：129 × 223.2 = 28,793
- **总计：194,525**

**人口：**
- 高级住宅：282 × 86.4 = 24,365
- 豪华住宅：121 × 144 = 17,424
- 最大人口：41,789
- 就业岗位：242×20 + 242×80 + 194×40 + 129×60 = 4,840 + 19,360 + 7,760 + 7,740 = 39,700
- **实际人口：39,700**

**建筑数量：1,613**

**稳定度：85-90**

**70%难度解锁条件：**
- 人口：27,790
- 每日收入：136,168
- 稳定度：60
- 建筑数量：1,129

---

## 最终建议（70%难度）

考虑到实际游戏体验，建议适当调整：

### 关卡1 (16×16)
- 人口：**2,500**（原2,996，降低以符合新手体验）
- 每日收入：**12,000**（原15,367，降低）
- 稳定度：**60**
- 建筑数量：**100**（原125，降低）

### 关卡2 (24×24)
- 人口：**5,000**（原6,888，降低）
- 每日收入：**25,000**（原33,744，降低）
- 稳定度：**65**（提升）
- 建筑数量：**250**（原282，降低）

### 关卡3 (32×32)
- 人口：**10,000**（原12,292，降低）
- 每日收入：**50,000**（原60,214，降低）
- 稳定度：**70**（提升）
- 建筑数量：**450**（原501，降低）

### 关卡4 (40×40)
- 人口：**15,000**（原19,292，降低）
- 每日收入：**80,000**（原94,500，降低）
- 稳定度：**75**（提升）
- 建筑数量：**700**（原784，降低）

### 关卡5 (48×48)
- 人口：**25,000**（原27,790，降低）
- 每日收入：**120,000**（原136,168，降低）
- 稳定度：**80**（提升）
- 建筑数量：**1,000**（原1,129，降低）

