# 关卡难度分析报告

## 📊 当前关卡配置

### 关卡1：新手村
- **地图大小**: 16×16
- **解锁条件**: 无（起始关卡）
- **难度**: ⭐ 非常简单

### 关卡2：繁荣小镇
- **地图大小**: 24×24
- **解锁条件**:
  - 人口: 50
  - 每日收入: 100
  - 稳定度: 60
  - 建筑数量: 10
  - 必需任务: 2个（建造1个住宅 + 累计获得10000金币）

### 关卡3：中型城市
- **地图大小**: 32×32
- **解锁条件**:
  - 人口: 150
  - 每日收入: 300
  - 稳定度: 70
  - 建筑数量: 25
  - 必需任务: 4个（商业起步、人口增长、基础设施、工业发展、稳定发展、建筑升级、电力保障）

### 关卡4：大型都市
- **地图大小**: 40×40
- **解锁条件**:
  - 人口: 300
  - 每日收入: 600
  - 稳定度: 75
  - 建筑数量: 50
  - 必需任务: 4个（人口大城、全面覆盖、经济繁荣）

### 关卡5：超级城市
- **地图大小**: 48×48
- **解锁条件**:
  - 人口: 500
  - 每日收入: 1000
  - 稳定度: 80
  - 建筑数量: 80
  - 必需任务: 3个

---

## 🏗️ 建筑基础数据参考

### 住宅建筑
- **普通住宅 (house)**: 
  - 成本: 300
  - 人口容量: 30
  - 产出: 5/天
  - 耗电: 10
  - 污染: 2

- **高级住宅 (house, Lv2)**:
  - 成本: 600
  - 人口容量: 72
  - 产出: 11/天
  - 耗电: 15
  - 污染: 3

### 商业建筑
- **普通商店 (shop)**:
  - 成本: 400
  - 产出: 24/天
  - 耗电: 15
  - 污染: 6
  - 就业: 10

- **高级商店 (shop, Lv2)**:
  - 成本: 800
  - 产出: 60/天
  - 耗电: 25
  - 污染: 8
  - 就业: 20

### 工业建筑
- **普通工厂 (factory)**:
  - 成本: 500
  - 产出: 70/天
  - 耗电: 40
  - 污染: 22
  - 就业: 20

---

## 📈 难度分析

### 关卡2：繁荣小镇 ⭐⭐

**目标分析**:
- **人口50**: 需要约 2个普通住宅 (30×2 = 60) ✅ 容易
- **每日收入100**: 
  - 需要约 4个商店 (24×4 = 96) 或
  - 需要约 2个工厂 (70×2 = 140) ✅ 容易
- **稳定度60**: 初始100，需要维持 ✅ 容易
- **建筑10个**: 包括道路，容易达成 ✅ 容易

**任务分析**:
- quest_001: 建造1个住宅 ✅ 非常简单
- quest_002: 累计获得10000金币 ⚠️ **可能偏难**
  - 如果每天收入100，需要100天
  - 如果每天收入200，需要50天
  - **建议**: 降低到5000-8000金币

**总体评价**: ⭐⭐ 基本合理，但累计金币任务可能偏难

---

### 关卡3：中型城市 ⭐⭐⭐

**目标分析**:
- **人口150**: 
  - 需要约 5个普通住宅 (30×5 = 150) 或
  - 需要约 2个高级住宅 (72×2 = 144) ✅ 合理
- **每日收入300**: 
  - 需要约 5个工厂 (70×5 = 350) 或
  - 需要约 13个商店 (24×13 = 312) ✅ 合理
- **稳定度70**: 需要管理污染和基础设施 ✅ 合理
- **建筑25个**: 合理 ✅

**任务分析**:
- quest_003: 建造3个商店 ✅ 容易
- quest_004: 人口达到100 ✅ 容易（关卡2已要求50）
- quest_005: 建造1个医院和1个警察局 ✅ 合理
- quest_006: 建造5个工厂 ✅ 合理
- quest_007: 稳定度保持在70以上持续5天 ⚠️ **可能偏难**
  - 需要玩家理解稳定度机制
  - 5天可能太长，建议改为3天
- quest_008: 升级3座建筑到2级 ✅ 合理
- quest_009: 发电量达到200 ✅ 合理（需要约3个风力发电塔）

**总体评价**: ⭐⭐⭐ 基本合理，但稳定度持续任务可能偏难

---

### 关卡4：大型都市 ⭐⭐⭐⭐

**目标分析**:
- **人口300**: 
  - 需要约 10个普通住宅 (30×10 = 300) 或
  - 需要约 4个高级住宅 (72×4 = 288) ✅ 合理
- **每日收入600**: 
  - 需要约 9个工厂 (70×9 = 630) 或
  - 需要约 25个商店 (24×25 = 600) ✅ 合理
- **稳定度75**: 需要良好的城市规划 ✅ 合理
- **建筑50个**: 合理 ✅

**任务分析**:
- quest_010: 人口达到400 ⚠️ **可能偏难**
  - 关卡要求300，任务要求400
  - 需要额外建造更多住宅
  - **建议**: 降低到350或与关卡要求对齐
- quest_011: 建造所有类型建筑各1座 ✅ 合理（引导玩家体验所有建筑）
- quest_012: 每日收入达到500 ⚠️ **可能偏易**
  - 关卡要求600，任务只要求500
  - **建议**: 提高到600或700，与关卡要求对齐

**总体评价**: ⭐⭐⭐⭐ 基本合理，但任务与关卡要求不一致

---

### 关卡5：超级城市 ⭐⭐⭐⭐⭐

**目标分析**:
- **人口500**: 
  - 需要约 17个普通住宅 (30×17 = 510) 或
  - 需要约 7个高级住宅 (72×7 = 504) ✅ 合理
- **每日收入1000**: 
  - 需要约 15个工厂 (70×15 = 1050) 或
  - 需要约 42个商店 (24×42 = 1008) ✅ 合理
- **稳定度80**: 需要优秀的城市规划和管理 ✅ 合理
- **建筑80个**: 合理 ✅

**总体评价**: ⭐⭐⭐⭐⭐ 合理，作为终极挑战

---

## ⚠️ 发现的问题

### 1. **关卡2：累计金币任务偏难**
- **问题**: quest_002 要求累计获得10000金币
- **分析**: 
  - 如果每天收入100，需要100天
  - 如果每天收入200，需要50天
  - 对于新手来说可能太慢
- **建议**: 降低到 **5000-8000金币**

### 2. **关卡3：稳定度持续任务偏难**
- **问题**: quest_007 要求稳定度保持在70以上持续5天
- **分析**: 
  - 5天可能太长，玩家可能因为一次失误就失败
  - 需要玩家完全理解稳定度机制
- **建议**: 降低到 **3天**，或改为"累计保持70以上10天"（允许中断）

### 3. **关卡4：任务与关卡要求不一致**
- **问题**: 
  - quest_010 要求人口400，但关卡只要求300
  - quest_012 要求每日收入500，但关卡要求600
- **分析**: 任务要求应该与关卡要求对齐或略高，引导玩家达成关卡目标
- **建议**: 
  - quest_010: 降低到 **350** 或与关卡要求对齐
  - quest_012: 提高到 **600-700**，与关卡要求对齐

### 4. **关卡难度递增不够平滑**
- **问题**: 从关卡2到关卡3，难度跳跃较大
  - 关卡2: 人口50 → 关卡3: 人口150 (3倍)
  - 关卡2: 每日收入100 → 关卡3: 每日收入300 (3倍)
- **建议**: 考虑在关卡2和3之间增加一个中间关卡，或调整关卡3的要求

---

## 💡 优化建议

### 建议1：调整关卡2的累计金币任务
```javascript
// quest_002: 降低累计金币要求
condition: {
  type: 'total_earned',
  amount: 5000, // 从10000降低到5000
}
```

### 建议2：调整关卡3的稳定度持续任务
```javascript
// quest_007: 降低持续天数
condition: {
  type: 'metric_sustain',
  metric: 'stability',
  value: 70,
  duration: 3, // 从5天降低到3天
}
```

### 建议3：调整关卡4的任务要求
```javascript
// quest_010: 降低人口要求
condition: {
  type: 'metric_reach',
  metric: 'population',
  value: 350, // 从400降低到350
}

// quest_012: 提高每日收入要求
condition: {
  type: 'metric_reach',
  metric: 'dailyIncome',
  value: 600, // 从500提高到600，与关卡要求对齐
}
```

### 建议4：优化关卡难度曲线
考虑调整关卡3的要求，使其更平滑：
- 人口: 150 → **120** (降低20%)
- 每日收入: 300 → **250** (降低17%)
- 建筑数量: 25 → **20** (降低20%)

---

## 📊 难度曲线图

```
难度等级
  ⭐⭐⭐⭐⭐ ┤                    [关卡5]
  ⭐⭐⭐⭐   ┤              [关卡4]
  ⭐⭐⭐     ┤        [关卡3] ⚠️ 跳跃较大
  ⭐⭐       ┤  [关卡2]
  ⭐         ┤[关卡1]
            └─────────────────────────
              1    2    3    4    5
```

---

## ✅ 总结

### 整体评价
- **关卡1-2**: ⭐⭐ 难度合理，适合新手
- **关卡3**: ⭐⭐⭐ 难度合理，但稳定度任务可能偏难
- **关卡4**: ⭐⭐⭐⭐ 难度合理，但任务要求需要对齐
- **关卡5**: ⭐⭐⭐⭐⭐ 难度合理，作为终极挑战

### 主要问题
1. ⚠️ 关卡2的累计金币任务偏难（10000 → 建议5000-8000）
2. ⚠️ 关卡3的稳定度持续任务偏难（5天 → 建议3天）
3. ⚠️ 关卡4的任务要求与关卡要求不一致
4. ⚠️ 关卡2到3的难度跳跃较大

### 建议优先级
1. **高优先级**: 调整关卡2的累计金币任务
2. **高优先级**: 调整关卡4的任务要求对齐
3. **中优先级**: 调整关卡3的稳定度持续任务
4. **低优先级**: 优化关卡难度曲线（如果玩家反馈难度跳跃大）

